#include <assert.h>
#include <string.h>

int main() {
    // Fstring with list size method call
    List<int> nums = [1, 2, 3];
    string s1 = f"size: {nums.size()}";
    assert(strcmp(s1, "size: 3") == 0);
    nums.free();

    // Fstring with string method call
    string s = "hello";
    string s2 = f"upper: {s.toUpper()}";
    assert(strcmp(s2, "upper: HELLO") == 0);

    // Literal braces in fstring
    int x = 42;
    string s3 = f"value: {{x}} = {x}";
    assert(strcmp(s3, "value: {x} = 42") == 0);

    // Braces in code gen
    string name = "test";
    string code = f"void {name}() {{}}";
    assert(strcmp(code, "void test() {}") == 0);

    print("PASS: test_fstring_advanced");
    return 0;
}
