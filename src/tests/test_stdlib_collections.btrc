/* Test stdlib collections: Stack, Queue, Counter */
#include <assert.h>
#include "../stdlib/collections.btrc"

int main() {
    // Stack — LIFO
    Stack* s = new Stack();
    assert(s.isEmpty());
    assert(s.size() == 0);
    s.push(10);
    s.push(20);
    s.push(30);
    assert(!s.isEmpty());
    assert(s.size() == 3);
    assert(s.peek() == 30);
    assert(s.pop() == 30);
    assert(s.pop() == 20);
    assert(s.size() == 1);
    assert(s.pop() == 10);
    assert(s.isEmpty());
    delete s;

    // Queue — FIFO
    Queue* q = new Queue();
    assert(q.isEmpty());
    assert(q.size() == 0);
    q.enqueue(1);
    q.enqueue(2);
    q.enqueue(3);
    assert(!q.isEmpty());
    assert(q.size() == 3);
    assert(q.peek() == 1);
    assert(q.dequeue() == 1);
    assert(q.dequeue() == 2);
    assert(q.size() == 1);
    assert(q.dequeue() == 3);
    assert(q.isEmpty());
    delete q;

    // Counter
    Counter* c = new Counter();
    assert(c.totalCount() == 0);
    assert(c.uniqueCount() == 0);
    c.add("apple");
    c.add("banana");
    c.add("apple");
    c.add("apple");
    c.add("banana");
    assert(c.get("apple") == 3);
    assert(c.get("banana") == 2);
    assert(c.get("cherry") == 0);
    assert(c.totalCount() == 5);
    assert(c.uniqueCount() == 2);
    delete c;

    print("PASS: test_stdlib_collections");
    return 0;
}
